alias e 'alias';e S 'set -g';e q 'echo';e B 'math';e x 'jq -re';e I 'sed -nE';function p;read -l x;printf -- (q $x|I "s/%/\\\x/g;s/.*$argv[1]=([^&]*).*/\1/p");end;S d $argv[1];S R (q $d|p 'v');S k '.signatureCipher';S n -A "Mozilla/5.0 (Windows NT 6.3; Win64; x64; rv:80.0) Gecko/20100101 Firefox/80.0" -fsL;S E (curl $n $d || exit 1);S F (q $E|I 's/.*config = \{(.+)\};yt.*/\{\1\}/p');S G (curl $n www.youtube.com/(q $E|I 's/.*"([^"]+base.js).*/\1/p') || exit 1);S w (q $F|x '.args.player_response|fromjson|.streamingData.adaptiveFormats|sort_by(-.bitrate)');S A '\)\{([^\}]+).*' ;S O (q $G|I 's/\$/\\\$/g;s/.*alr.*yes.*=(.*)\(dec.*/\1/p') ;S P (string split ';' (q $G|I "s/.*$O=function\(a$A/\1/p"));S P $P[2..-2];for r in video audio;S L (q $w|x '[.[]|select(.mimeType|test("'$r'"))][0]');S K (q $L|x $k>/dev/null; q $status);S Q (if test $K -ne 0;q $L|x '.url';else;q -n $L|x $k|p 'url';q \&sig=(;S J (q $L|x $k|p 's');for M in $P;S g (q $M|I 's/[^,]+,([0-9]+)\)/\1/p');S N (q $M|I 's/\(.*$//;s/\./\.\*/p');S H (q $G|I "s/.*$N:function[^\)]+$A/\1/p");S J (switch $H;case 'a.rev*';q $J|rev;case 'var c=a*';S J (q $J|string split '');S g (B $g%(count $J)+1);S j $J[1];S J[1] $J[$g];S J[$g] $j;string join '' $J;case 'a.spl*';S J (q $J|string split '');string join '' $J[(B $g+1)..-1];end);end;q $J);end);S h 1048576;S y (q $L|x '.contentLength');S C $y;cat (for i in (seq 0 (B -s0 $C/$h));S D (if test $y -lt $h;q $y;else;q $h;end);S z (B $C-$y);curl $n -o $i.$r.$R $Q\&range=$z-(B $z+$D)&;S y (B $y-$D-1);while test (jobs|wc -l) -ge 8;wait -n curl;end;q -ne "\r$z">&2;q $i.$r.$R;end;wait)>$r.$R;q "...$r ok">&2;end;ffmpeg -i video.$R -i audio.$R -c copy $R.mkv;rm *.$R